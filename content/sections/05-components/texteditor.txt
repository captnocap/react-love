=== METADATA ===
title: TextEditor
description: Multi-line document editor with Lua-owned interaction for native mode and textarea for web.
category: Components
platforms: love2d, web
keywords: text editor, editor, multiline, document, code, lua, textarea
related: TextInput
difficulty: intermediate

=== OVERVIEW ===
TextEditor is a multi-line editing surface designed for document-style text editing. Unlike TextInput, which handles per-keystroke editing in JavaScript, TextEditor's native mode delegates ALL editing interaction (cursor movement, selection, keystrokes, scrolling) to Lua. The JavaScript side only receives boundary events: focus, blur, and submit.

This "Lua-owned interaction" design eliminates bridge traffic for every keystroke, making TextEditor suitable for editing large text content in the Love2D target. In web mode, TextEditor renders a standard HTML `<textarea>` with monospace styling.

=== API / SYNTAX ===
Import: import { TextEditor } from '@ilovereact/core';

Usage:
```tsx
<TextEditor
  initialValue="Hello, world!"
  onBlur={(text) => saveDocument(text)}
  style={{ width: 400, height: 300 }}
/>
```

Props (from TextEditorProps in types.ts):

| Prop          | Type                       | Default | Description                                         |
|---------------|----------------------------|---------|-----------------------------------------------------|
| initialValue  | string                     | -       | Initial text content used on first render            |
| value         | string                     | -       | Controlled value -- updates editor text when changed |
| onChangeText  | (text: string) => void     | -       | Called on blur/submit with the final text value      |
| onSubmit      | (text: string) => void     | -       | Called on Ctrl+Enter with the current text value     |
| onFocus       | () => void                 | -       | Called when the editor gains focus                   |
| onBlur        | (text: string) => void     | -       | Called when the editor loses focus, with final text  |
| placeholder   | string                     | -       | Placeholder text shown when empty and unfocused      |
| readOnly      | boolean                    | false   | Whether the editor is read-only                      |
| lineNumbers   | boolean                    | true    | Whether to show line numbers in the gutter           |
| style         | Style                      | -       | Container style (sizing, layout)                     |
| textStyle     | Style                      | -       | Text style (fontSize, color, fontFamily)             |

=== EXAMPLES ===
Example 1: Basic editor with blur handler
---
```tsx
<TextEditor
  initialValue="function hello()\n  print('world')\nend"
  onBlur={(text) => console.log('Final text:', text)}
  style={{ width: '100%', height: 200 }}
/>
```
---
Platforms: love2d, web

Example 2: Controlled editor
---
```tsx
const [code, setCode] = useState('');

<TextEditor
  value={code}
  onChangeText={setCode}
  onSubmit={(text) => runCode(text)}
  lineNumbers={true}
  style={{ width: 500, height: 400 }}
  textStyle={{ fontSize: 13, fontFamily: 'monospace', color: '#d9dee8' }}
/>
```
---
Platforms: love2d, web

Example 3: Read-only code viewer
---
```tsx
<TextEditor
  value={sourceCode}
  readOnly
  lineNumbers={true}
  style={{ width: '100%', height: 300 }}
/>
```
---
Platforms: love2d, web

=== PLATFORM NOTES ===
- Web: Renders a `<textarea>` inside a styled container (`backgroundColor: '#1e1e24'`, `borderRadius: 4`). Default font is monospace, `fontSize: 14`, `lineHeight: 1.55`, `tabSize: 4`. Submit fires on Ctrl+Enter. `onBlur` fires the textarea's blur event. `onChangeText` is called on blur with the final value.
- Native (Love2D): Emits a `'TextEditor'` host element. Lua's texteditor.lua handles ALL interaction -- cursor, selection, keyboard input, scrolling. No per-keystroke bridge traffic. The only events that cross the JS/Lua bridge are `texteditor:focus`, `texteditor:blur`, and `texteditor:submit`. The `textStyle` properties (`fontSize`, `fontFamily`, `fontWeight`, `color`) are merged into the main `style` so Lua can read them from `node.props.style`.
- `lineNumbers` defaults to `true`. Set to `false` to hide the gutter.
- Native mode event handlers are registered as `onTextEditorFocus`, `onTextEditorBlur`, and `onTextEditorSubmit` in the reconciler's handler registry.
- Terminal/grid targets: TextEditor is not currently supported on grid targets.

=== CRITICAL RULES ===
- TextEditor needs explicit `width` and `height` in its style. Without sizing, the editor container will collapse.
- In native mode, `onChangeText` is NOT called on every keystroke. It fires only on blur and submit boundary events. This is by design to avoid bridge traffic.
- The `onBlur` callback signature is `(text: string) => void`, unlike TextInput's `() => void`. TextEditor passes the final text value because Lua owns the editing state.
- `initialValue` is only used on the first render. To update the text programmatically after mount, use the controlled `value` prop.
- Submit is triggered by Ctrl+Enter, not plain Enter (which inserts a newline).

=== SEE ALSO ===
- TextInput
