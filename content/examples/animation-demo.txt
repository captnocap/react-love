=== METADATA ===
title: Animation Examples
description: Demonstrates timing, spring, composite, and CSS-style animations in iLoveReact
category: Examples
platforms: all
keywords: animation, spring, timing, easing, parallel, sequence, stagger, loop, AnimatedValue, useAnimation, useSpring, transition, keyframes
difficulty: intermediate

=== OVERVIEW ===
This example demonstrates the iLoveReact animation system. It covers three approaches:
imperative animations via AnimatedValue (timing and spring), convenience hooks
(useSpring, useTransition), and declarative CSS-style animations (style.transition and
style.animation). The example shows how to create smooth motion without causing React
re-renders on every frame.

=== CODE ===
---
import { useState, useEffect } from 'react';
import {
  Box, Text, Pressable,
  AnimatedValue, useAnimation, useSpring, Easing,
  parallel, sequence, stagger, loop,
} from '@ilovereact/core';

// Example 1: Imperative Timing Animation
function FadeInBox() {
  const [anim, opacity] = useAnimation(0);

  useEffect(() => {
    anim.timing({
      toValue: 1,
      duration: 1000,
      easing: Easing.easeOut,
    }).start();
  }, []);

  return (
    <Box style={{
      width: 100,
      height: 100,
      backgroundColor: '#3b82f6',
      borderRadius: 12,
      opacity,
      justifyContent: 'center',
      alignItems: 'center',
    }}>
      <Text style={{ fontSize: 12, color: '#ffffff' }}>Fade In</Text>
    </Box>
  );
}

// Example 2: Spring Animation
function SpringBox() {
  const [expanded, setExpanded] = useState(false);
  const size = useSpring(expanded ? 150 : 80, {
    stiffness: 180,
    damping: 12,
  });

  return (
    <Pressable onPress={() => setExpanded(e => !e)}>
      <Box style={{
        width: size,
        height: size,
        backgroundColor: '#22c55e',
        borderRadius: size / 6,
        justifyContent: 'center',
        alignItems: 'center',
      }}>
        <Text style={{ fontSize: 12, color: '#ffffff' }}>
          {expanded ? 'Shrink' : 'Grow'}
        </Text>
      </Box>
    </Pressable>
  );
}

// Example 3: Composite Animations (Parallel + Sequence)
function CompositeBox() {
  const [animX, x] = useAnimation(0);
  const [animY, y] = useAnimation(0);
  const [animScale, scale] = useAnimation(1);

  useEffect(() => {
    const moveRight = animX.timing({ toValue: 200, duration: 500, easing: Easing.easeInOut });
    const moveDown = animY.timing({ toValue: 100, duration: 500, easing: Easing.easeInOut });
    const scaleUp = animScale.timing({ toValue: 1.5, duration: 300 });
    const scaleDown = animScale.timing({ toValue: 1, duration: 300 });

    const animation = sequence([
      parallel([moveRight, moveDown]),
      scaleUp,
      scaleDown,
    ]);

    loop(animation, { iterations: -1 }).start();

    return () => {
      animX.setValue(0);
      animY.setValue(0);
      animScale.setValue(1);
    };
  }, []);

  return (
    <Box style={{
      width: 60 * scale,
      height: 60 * scale,
      backgroundColor: '#a855f7',
      borderRadius: 8,
      transform: { translateX: x, translateY: y },
      justifyContent: 'center',
      alignItems: 'center',
    }}>
      <Text style={{ fontSize: 10, color: '#ffffff' }}>Loop</Text>
    </Box>
  );
}

// Example 4: CSS-Style Transition (hoverStyle + transition)
function TransitionBox() {
  return (
    <Box
      style={{
        width: 120,
        height: 60,
        backgroundColor: '#1e293b',
        borderRadius: 8,
        justifyContent: 'center',
        alignItems: 'center',
        transition: {
          backgroundColor: { duration: 300, easing: 'easeInOut' },
        },
      }}
      hoverStyle={{
        backgroundColor: '#3b82f6',
      }}
    >
      <Text style={{ fontSize: 12, color: '#f8fafc' }}>Hover Me</Text>
    </Box>
  );
}

// Example 5: CSS-Style Keyframe Animation
function PulseBox() {
  return (
    <Box style={{
      width: 80,
      height: 80,
      backgroundColor: '#ef4444',
      borderRadius: 40,
      justifyContent: 'center',
      alignItems: 'center',
      animation: {
        keyframes: {
          0: { opacity: 1 },
          50: { opacity: 0.5 },
          100: { opacity: 1 },
        },
        duration: 2000,
        iterations: -1,
        easing: 'easeInOut',
      },
    }}>
      <Text style={{ fontSize: 12, color: '#ffffff' }}>Pulse</Text>
    </Box>
  );
}

// Main App
export default function App() {
  return (
    <Box style={{
      width: '100%',
      height: '100%',
      backgroundColor: '#0f172a',
      padding: 24,
      gap: 24,
    }}>
      <Text style={{ fontSize: 24, color: '#f8fafc' }}>Animation Examples</Text>
      <Box style={{ flexDirection: 'row', width: '100%', gap: 24, flexWrap: 'wrap' }}>
        <FadeInBox />
        <SpringBox />
        <TransitionBox />
        <PulseBox />
      </Box>
      <Box style={{ height: 200 }}>
        <CompositeBox />
      </Box>
    </Box>
  );
}
---

=== EXPLANATION ===
1. FadeInBox uses useAnimation to get an AnimatedValue and its current numeric
   value. The timing animation runs once on mount, easing opacity from 0 to 1
   over 1 second. The component re-renders only when the batched value changes.

2. SpringBox uses the useSpring convenience hook. When the target value changes
   (80 to 150 or back), a spring animation automatically starts. The stiffness
   and damping parameters control the spring's feel (bouncy vs smooth).

3. CompositeBox demonstrates parallel, sequence, and loop. First, X and Y
   animations run in parallel (diagonal move). Then scale animates up and down
   in sequence. The whole thing loops infinitely.

4. TransitionBox uses CSS-style transitions. The transition property on the style
   declares that backgroundColor should animate over 300ms with easeInOut easing.
   The hoverStyle provides the target value. The Lua animate module handles
   interpolation when the hover state changes (0-frame latency, no JS round-trip).

5. PulseBox uses CSS-style keyframe animation. The animation property declares
   keyframes at 0%, 50%, and 100%, with infinite iterations. The Lua animate
   module runs this entirely on the Lua side, no React re-renders needed.

6. Key performance insight: useAnimation and useSpring batch updates to animation
   frames. AnimatedValue listeners fire every frame, but React state updates are
   debounced. CSS-style animations (transition/animation) run entirely in Lua
   without any React involvement.
